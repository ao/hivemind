{{ template "base-nodes.html" . }}

{{ define "nodes-title" }}Nodes{{ end }}

{{ define "nodes-content" }}
<h1>Nodes</h1>

{{ range .nodes }}
<div class="card">
    <h2>{{ .ID }}</h2>
    <div style="display: flex; flex-wrap: wrap">
        <div style="flex: 1; min-width: 200px; margin-right: 20px">
            <h3>Address</h3>
            <p>{{ .Address }}</p>

            <h3>Resources</h3>
            <p>CPU Available: {{ .CPUAvailable }}%</p>
            <p>Memory Available: {{ div .MemoryAvailable 1048576 }} MB</p>
            <p>Containers Running: {{ .ContainersRunning }}</p>
        </div>

        <div style="flex: 2; min-width: 300px">
            <h3>Containers ({{ len .Containers }})</h3>
            {{ if .Containers }}
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Image</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {{ range .Containers }}
                    <tr>
                        <td>{{ .Name }}</td>
                        <td>{{ .Image }}</td>
                        <td class="status-{{ lower .Status }}">
                            {{ .Status }}
                        </td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
            {{ else }}
            <p>No containers on this node</p>
            {{ end }}
        </div>
    </div>
</div>
{{ end }}
{{ end }}
