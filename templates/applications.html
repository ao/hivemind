{{ template "base-applications.html" . }}

{{ define "applications-title" }}Applications{{ end }}

{{ define "applications-content" }}
<h1>Applications</h1>

<div class="card">
    <a href="/deploy" class="btn btn-success">Deploy New Application</a>
</div>

{{ if .services }}
  {{ range .services }}
  <div class="card">
      <div
          style="
              display: flex;
              justify-content: space-between;
              align-items: center;
          "
      >
          <h2>{{ .Name }}</h2>
          <div>
              <a href="/scale/{{ .Name }}" class="btn">Scale</a>
              <form
                  method="post"
                  action="/restart/{{ .Name }}"
                  style="display: inline"
              >
                  <button type="submit" class="btn btn-danger">Restart</button>
              </form>
          </div>
      </div>

      <p><strong>Domain:</strong> {{ .Domain }}</p>
      <p>
          <strong>Replicas:</strong> {{ .CurrentReplicas }}/{{ .DesiredReplicas }}
      </p>

      <h3>Containers</h3>
      <table>
          <thead>
              <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Status</th>
                  <th>Node</th>
              </tr>
          </thead>
          <tbody>
              {{ range .Containers }}
              <tr>
                  <td>{{ .ID }}</td>
                  <td>{{ .Name }}</td>
                  <td class="status-{{ lower .Status }}">
                      {{ .Status }}
                  </td>
                  <td>{{ .NodeID }}</td>
              </tr>
              {{ end }}
          </tbody>
      </table>
  </div>
  {{ end }}
{{ else }}
  <div class="card">
      <p>
          No applications deployed yet.
          <a href="/deploy">Deploy your first application</a>.
      </p>
  </div>
{{ end }}
{{ end }}
