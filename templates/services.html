{{ template "base-services.html" . }}

{{ define "services-title" }}Services{{ end }}

{{ define "services-content" }}
<h1>Services</h1>

{{ range $service_name, $endpoints := .service_endpoints }}
<div class="card">
    <h2>{{ $service_name }}</h2>

    <p>
        <strong>Service URL:</strong>
        {{ if $endpoints }}
            {{ with index $endpoints 0 }}
                http://{{ .Domain }}
            {{ end }}
        {{ else }}
            No domain configured
        {{ end }}
    </p>

    <h3>Endpoints</h3>
    <table>
        <thead>
            <tr>
                <th>Node</th>
                <th>IP Address</th>
                <th>Port</th>
                <th>Health</th>
            </tr>
        </thead>
        <tbody>
            {{ range $endpoints }}
            <tr>
                <td>{{ .NodeID }}</td>
                <td>{{ .IPAddress }}</td>
                <td>{{ .Port }}</td>
                <td>{{ .HealthStatus }}</td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>
{{ else }}
<div class="card">
    <p>No services registered yet.</p>
</div>
{{ end }}
{{ end }}
